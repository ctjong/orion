version: '2'

services:
  # mssql test components
  oriontest-mssql:
    image: mcr.microsoft.com/mssql/server
    restart: always
    ports:
      - "1433:1433"
    env_file:
      - oriontest-mssql.env
  oriontest-server1:
    build: ./server
    volumes:
      - ./server:/code
    ports:
      - "1337:1337"
    env_file:
      - oriontest-server1.env

  # mysql test components
  oriontest-mysql:
    image: mysql
    restart: always
    ports:
      - "3306:3306"
    env_file:
      - oriontest-mysql.env
    volumes:
      - ./mysql:/etc/mysql/conf.d
  oriontest-pma:
    image: phpmyadmin/phpmyadmin
    restart: always
    ports:
      - "8080:80"
    environment:
      - PMA_HOST=oriontest-mysql
    depends_on:
      - oriontest-mysql
  oriontest-server2:
    build: ./server
    volumes:
      - ./server:/code
    ports:
      - "1338:1338"
    env_file:
      - oriontest-server2.env
